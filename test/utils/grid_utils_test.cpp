#include "../include/utils/grid_utils.h"

#include <gtest/gtest.h>

TEST(ParseGridTest, CanParseGrid)
{
    const std::string input{
        "..@@.@@@@.\n"
        "@@@.@.@.@@\n"
        "@@@@@.@.@@\n"
        "@.@@@@..@.\n"
        "@@.@@@@.@@\n"
        ".@@@@@@@.@\n"
        ".@.@.@.@@@\n"
        "@.@@@.@@@@\n"
        ".@@@@@@@@.\n"
        "@.@.@@@.@."
    };
    const auto grid = parseGrid(input);
    const std::vector<std::vector<char>> expected{
        std::vector{'.', '.', '@', '@', '.', '@', '@', '@', '@', '.'},
        std::vector{'@', '@', '@', '.', '@', '.', '@', '.', '@', '@'},
        std::vector{'@', '@', '@', '@', '@', '.', '@', '.', '@', '@'},
        std::vector{'@', '.', '@', '@', '@', '@', '.', '.', '@', '.'},
        std::vector{'@', '@', '.', '@', '@', '@', '@', '.', '@', '@'},
        std::vector{'.', '@', '@', '@', '@', '@', '@', '@', '.', '@'},
        std::vector{'.', '@', '.', '@', '.', '@', '.', '@', '@', '@'},
        std::vector{'@', '.', '@', '@', '@', '.', '@', '@', '@', '@'},
        std::vector{'.', '@', '@', '@', '@', '@', '@', '@', '@', '.'},
        std::vector{'@', '.', '@', '.', '@', '@', '@', '.', '@', '.'},
    };
    EXPECT_EQ(grid, expected);
}

TEST(ParseGridTest, NewLineAtEndIsIgnored)
{
    const std::string input{
        "..@@.@@@@.\n"
        "@@@.@.@.@@\n"
        "@@@@@.@.@@\n"
        "@.@@@@..@.\n"
        "@@.@@@@.@@\n"
        ".@@@@@@@.@\n"
        ".@.@.@.@@@\n"
        "@.@@@.@@@@\n"
        ".@@@@@@@@.\n"
        "@.@.@@@.@.\n"
    };
    const auto grid = parseGrid(input);
    const std::vector<std::vector<char>> expected{
        std::vector{'.', '.', '@', '@', '.', '@', '@', '@', '@', '.'},
        std::vector{'@', '@', '@', '.', '@', '.', '@', '.', '@', '@'},
        std::vector{'@', '@', '@', '@', '@', '.', '@', '.', '@', '@'},
        std::vector{'@', '.', '@', '@', '@', '@', '.', '.', '@', '.'},
        std::vector{'@', '@', '.', '@', '@', '@', '@', '.', '@', '@'},
        std::vector{'.', '@', '@', '@', '@', '@', '@', '@', '.', '@'},
        std::vector{'.', '@', '.', '@', '.', '@', '.', '@', '@', '@'},
        std::vector{'@', '.', '@', '@', '@', '.', '@', '@', '@', '@'},
        std::vector{'.', '@', '@', '@', '@', '@', '@', '@', '@', '.'},
        std::vector{'@', '.', '@', '.', '@', '@', '@', '.', '@', '.'},
    };
    EXPECT_EQ(grid, expected);
}